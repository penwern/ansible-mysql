# {{ ansible_managed }}
# MySQL Performance Schema Configuration

[mysqld]
# Enable Performance Schema
performance_schema = ON

# Performance Schema settings
performance_schema_max_table_instances = 400
performance_schema_max_table_handles = 4000

# Events configuration
performance_schema_events_waits_history_size = 20
performance_schema_events_waits_history_long_size = 15000
performance_schema_events_stages_history_size = 20
performance_schema_events_stages_history_long_size = 1000
performance_schema_events_statements_history_size = 20
performance_schema_events_statements_history_long_size = 1000

# Digest configuration
performance_schema_max_digest_length = 1024
performance_schema_digests_size = 10000

# Connection configuration
performance_schema_max_cond_instances = 3504
performance_schema_max_mutex_instances = 15906
performance_schema_max_rwlock_instances = 9102
performance_schema_max_socket_instances = 322
performance_schema_max_thread_instances = 402
